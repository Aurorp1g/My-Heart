(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{6646:function(e,t,a){Promise.resolve().then(a.bind(a,1052))},1052:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n=a(7437),i=a(2673),r=a.n(i),s=a(7191),o=a(2425),l=a.n(o);function c(e){var t;return(0,n.jsxs)(s.E.div,{className:l().framedPicture+" shadow-xl cursor-pointer",initial:{scale:.7,rotate:0},whileInView:{scale:1,rotate:null!==(t=e.rotate)&&void 0!==t?t:10*Math.random()+-5},transition:{type:"spring",stiffness:400,damping:20,mass:1},whileHover:{scale:1.05},whileTap:{scale:1},drag:!0,dragConstraints:{top:0,left:0,right:0,bottom:0},onClick:e.onClick,children:[(0,n.jsx)(s.E.img,{src:e.imageSrc,alt:"image about "+e.nameTag,className:l().framedPictureImage,whileInView:{scale:1},transition:{type:"spring",stiffness:200,damping:20,mass:1},whileHover:{scale:1.05},whileTap:{scale:1}}),""!=e.nameTag&&(0,n.jsx)("h1",{className:r().className+" "+l().framedPictureNameTag,children:e.nameTag}),""!=e.timeTag&&(0,n.jsx)("p",{className:r().className+" "+l().framedPictureTimeTag,children:e.timeTag})]})}function m(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex flex-wrap justify-between items-center xl:py-20 xl:p-40 gap-x-10 gap-y-20",children:e.picturePropsList.map((t,a)=>(0,n.jsx)(c,{imageSrc:t.imageSrc,nameTag:t.nameTag,timeTag:t.timeTag,rotate:t.rotate,onClick:()=>{t.herf&&""!==t.herf?window.open(t.herf,"_blank"):e.onImageClick(t.imageSrc,t.nameTag,t.timeTag)}},t.nameTag+a.toString()))})})}var d=a(1348),u=a(2265);function g(e){let{isOpen:t,imageSrc:a,nameTag:i,timeTag:r,onClose:o,imageList:c=[],currentIndex:m=0,onPrev:g,onNext:p}=e,[f,x]=(0,u.useState)(1),[h,y]=(0,u.useState)({x:0,y:0}),[b,w]=(0,u.useState)(!1),[_,k]=(0,u.useState)({x:0,y:0}),v=(0,u.useRef)(null),j=(0,u.useRef)(null),T=c.length>0&&m>0,N=c.length>0&&m<c.length-1;(0,u.useEffect)(()=>{if(t){let e=window.scrollY;document.body.style.overflow="hidden",document.body.style.position="relative",window.scrollTo(0,e)}else document.body.style.overflow="",document.body.style.position="";return()=>{document.body.style.overflow="",document.body.style.position=""}},[t]);let I=()=>{x(1),y({x:0,y:0})};(0,u.useEffect)(()=>{t||I()},[t]);let C=()=>x(e=>Math.min(e+.2,3)),L=()=>x(e=>Math.max(e-.2,.5)),P=()=>I(),E=()=>{w(!1)};return(0,u.useEffect)(()=>{let e=e=>{if(t)switch(e.key){case"Escape":o();break;case"+":case"=":e.preventDefault(),C();break;case"-":e.preventDefault(),L();break;case"0":e.preventDefault(),P();break;case"ArrowLeft":e.preventDefault(),T&&g&&g();break;case"ArrowRight":e.preventDefault(),N&&p&&p()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,o,T,N,g,p]),(0,n.jsx)(d.M,{children:t&&(0,n.jsx)(s.E.div,{className:"fixed inset-0 z-[1100] flex items-center justify-center ".concat(l().imageViewerBackdrop),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,children:(0,n.jsxs)(s.E.div,{ref:j,className:"relative ".concat(l().imageViewerContent),initial:{scale:.7,opacity:0,y:50,rotate:-5},animate:{scale:1,opacity:1,y:0,rotate:0},exit:{scale:.7,opacity:0,y:50,rotate:5},transition:{type:"spring",damping:25,stiffness:300,mass:1.1},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{className:"absolute -top-4 -left-4 w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full opacity-60 blur-sm"}),(0,n.jsx)("div",{className:"absolute -bottom-4 -right-4 w-12 h-12 bg-gradient-to-r from-yellow-400 to-red-400 rounded-full opacity-40 blur-sm"}),(0,n.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 z-20 ".concat(l().toolbar),children:[(0,n.jsx)(s.E.button,{className:"".concat(l().toolbarButton),onClick:L,whileHover:{scale:1.1},whileTap:{scale:.9},title:"缩小",children:(0,n.jsx)("i",{className:"fa-solid fa-magnifying-glass-minus"})}),(0,n.jsx)(s.E.button,{className:"".concat(l().toolbarButton),onClick:P,whileHover:{scale:1.1},whileTap:{scale:.9},title:"重置",children:(0,n.jsx)("span",{className:"text-xs font-bold",children:"1:1"})}),(0,n.jsx)(s.E.button,{className:"".concat(l().toolbarButton),onClick:C,whileHover:{scale:1.1},whileTap:{scale:.9},title:"放大",children:(0,n.jsx)("i",{className:"fa-solid fa-magnifying-glass-plus"})})]}),(0,n.jsx)(s.E.button,{className:"absolute -top-6 -right-6 z-10 rounded-full p-3 text-white text-2xl ".concat(l().imageViewerCloseButton),onClick:o,whileHover:{scale:1.15,rotate:180},whileTap:{scale:.9},children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.length>1&&(0,n.jsxs)(n.Fragment,{children:[T&&(0,n.jsx)(s.E.button,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-20 rounded-full p-4 text-white text-2xl ".concat(l().navButton),onClick:g,whileHover:{scale:1.15,x:-5},whileTap:{scale:.9},title:"上一张 (←)",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),N&&(0,n.jsx)(s.E.button,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-20 rounded-full p-4 text-white text-2xl ".concat(l().navButton),onClick:p,whileHover:{scale:1.15,x:5},whileTap:{scale:.9},title:"下一张 (→)",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsxs)(s.E.div,{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-1 rounded-full text-sm font-medium z-20",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:[m+1," / ",c.length]})]}),(0,n.jsxs)(s.E.div,{className:"p-6",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10},children:[(0,n.jsx)("div",{className:"rounded-2xl overflow-hidden cursor-move",onMouseDown:e=>{f<=1||(w(!0),k({x:e.clientX-h.x,y:e.clientY-h.y}))},onMouseMove:e=>{b&&!(f<=1)&&y({x:e.clientX-_.x,y:e.clientY-_.y})},onMouseUp:E,onMouseLeave:E,onWheel:e=>{e.preventDefault();let t=e.deltaY>0?-.1:.1;x(e=>Math.max(.5,Math.min(3,e+t)))},style:{cursor:f>1?"grab":"default"},children:(0,n.jsx)("img",{ref:v,src:a,alt:i,className:"w-full max-h-[70vh] object-contain ".concat(l().imageViewerImage),style:{transform:"scale(".concat(f,") translate(").concat(h.x,"px, ").concat(h.y,"px)"),transformOrigin:"center center",transition:"transform 0.2s ease"},draggable:!1})}),(i||r)&&(0,n.jsxs)(s.E.div,{className:"mt-6 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[i&&(0,n.jsx)(s.E.h3,{className:"text-3xl font-bold text-white mb-3 bg-gradient-to-r from-white to-gray-200 bg-clip-text text-transparent",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4},children:i}),r&&(0,n.jsxs)(s.E.p,{className:"text-white/80 text-lg font-light italic",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:["\uD83D\uDCC5 ",r]})]})]}),(0,n.jsxs)(s.E.div,{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 text-white/60 text-sm font-light text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[(0,n.jsx)("div",{children:"✨ 滚轮缩放 • 拖拽移动 • 点击背景关闭 ✨"}),(0,n.jsx)("div",{className:"text-xs mt-1",children:"快捷键: +放大 -缩小 0重置 Esc关闭 ←→切换"})]}),1!==f&&(0,n.jsxs)(s.E.div,{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm font-mono z-20",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:[Math.round(100*f),"%"]})]})})})}var p=a(190),f=a(5043),x=a(3827),h=a.n(x);function y(){let e="/My-Heart",[t,a]=(0,u.useState)({backgroundImage:"",randomOrder:!1,picturePropsList:[]}),[i,r]=(0,u.useState)({isOpen:!1,imageSrc:"",nameTag:"",timeTag:"",imageList:[],currentIndex:0});(0,u.useEffect)(()=>{fetch("".concat(e,"/gallery-wall/gallery-wall-config.json")).then(e=>e.json()).then(t=>{let n={backgroundImage:"",randomOrder:!1,picturePropsList:[]};""!=t.backgroundImage&&t.backgroundImage&&(n.backgroundImage=t.backgroundImage),t.randomOrder&&(n.randomOrder=t.randomOrder),t.pictureList.forEach(t=>{n.picturePropsList.push({imageSrc:"".concat(e).concat(t.imageSrc),nameTag:t.nameTag,timeTag:t.timeTag,herf:t.herf}),a(n)})})},[]),t.randomOrder&&(t.picturePropsList=(e=>{for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e})(t.picturePropsList));let s=()=>t.picturePropsList.map(e=>e.imageSrc),o=e=>{let a=t.picturePropsList.findIndex(t=>t.imageSrc===e);if(-1!==a){let e=t.picturePropsList[a];return{index:a,nameTag:e.nameTag,timeTag:e.timeTag}}return null};return(0,n.jsx)(f.Z,{children:(0,n.jsxs)(p.Z,{children:[(0,n.jsxs)("div",{className:h().backgroundContainer,children:[(0,n.jsx)("div",{className:h().backgroundImage,style:{backgroundImage:"url('".concat(t.backgroundImage,"')")}}),(0,n.jsx)("div",{className:h().backgroundImage,style:{backgroundImage:"url('".concat(e,"/bg/gallery-background.jpg')")}})]}),(0,n.jsx)("div",{className:h().contentWrapper,children:(0,n.jsx)(m,{picturePropsList:t.picturePropsList,onImageClick:(e,t,a)=>{let n=s(),i=o(e);r({isOpen:!0,imageSrc:e,nameTag:t,timeTag:a,imageList:n,currentIndex:(null==i?void 0:i.index)||0})}})}),(0,n.jsx)(g,{isOpen:i.isOpen,imageSrc:i.imageSrc,nameTag:i.nameTag,timeTag:i.timeTag,onClose:()=>{r({isOpen:!1,imageSrc:"",nameTag:"",timeTag:"",imageList:[],currentIndex:0})},imageList:i.imageList,currentIndex:i.currentIndex,onPrev:()=>{if(i.currentIndex>0){let e=i.currentIndex-1,a=t.picturePropsList[e];r(t=>({...t,imageSrc:a.imageSrc,nameTag:a.nameTag,timeTag:a.timeTag,currentIndex:e}))}},onNext:()=>{if(i.currentIndex<t.picturePropsList.length-1){let e=i.currentIndex+1,a=t.picturePropsList[e];r(t=>({...t,imageSrc:a.imageSrc,nameTag:a.nameTag,timeTag:a.timeTag,currentIndex:e}))}}})]})})}},2425:function(e){e.exports={framedPicture:"styles_framedPicture__4jgPe",framedPictureImage:"styles_framedPictureImage__U_dPo",framedPictureNameTag:"styles_framedPictureNameTag__Fy2nG",framedPictureTimeTag:"styles_framedPictureTimeTag__dTId_",imageViewerBackdrop:"styles_imageViewerBackdrop__GtX8n",imageViewerContent:"styles_imageViewerContent__HD_3r",imageViewerImage:"styles_imageViewerImage__MObvo",imageViewerCloseButton:"styles_imageViewerCloseButton__Qfu0C",toolbar:"styles_toolbar__Crssy",toolbarButton:"styles_toolbarButton__4J7L_",navButton:"styles_navButton__5jrcM"}},3827:function(e){e.exports={background:"styles_background__qMZ1J",backgroundNoiseFilter:"styles_backgroundNoiseFilter__3F5tJ",backgroundContainer:"styles_backgroundContainer__QGiFv",backgroundImage:"styles_backgroundImage__UskbH",contentWrapper:"styles_contentWrapper__4S_kD"}},2673:function(e){e.exports={style:{fontFamily:"'__Oswald_fb5e8d', '__Oswald_Fallback_fb5e8d'",fontStyle:"normal"},className:"__className_fb5e8d"}}},function(e){e.O(0,[901,67,628,971,69,744],function(){return e(e.s=6646)}),_N_E=e.O()}]);