(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{6646:function(e,t,a){Promise.resolve().then(a.bind(a,1052))},5043:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var n=a(7437),r=a(2265),s=a(7907);function o(e){let{children:t,requiredPassword:a="250601"}=e,[o,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(""),[d,g]=(0,r.useState)(""),f=(0,s.useRouter)();return((0,s.usePathname)(),(0,r.useEffect)(()=>{(()=>{let e=localStorage.getItem("encrypted-auth"),t=localStorage.getItem("auth-time");if(e&&t)try{let[t,n]=atob(e).split("|");if(t===btoa(a)&&Date.now()-parseInt(n)<864e5){l(!0);return}}catch(e){localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time")}l(!1),c(!0)})()},[a]),i)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-50 to-red-100",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full mx-4",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)("i",{className:"fas fa-lock text-red-500 text-2xl"})}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"访问保护"}),(0,n.jsx)("p",{className:"text-gray-600",children:"请输入密码访问此页面"})]}),(0,n.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),g(""),m===a){let e=Date.now().toString(),t=btoa("".concat(btoa(a),"|").concat(e));localStorage.setItem("encrypted-auth",t),localStorage.setItem("auth-time",e),l(!0),c(!1),u("")}else g("密码错误，请重试")},className:"space-y-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"password",value:m,onChange:e=>u(e.target.value),placeholder:"请输入访问密码",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",autoFocus:!0})}),d&&(0,n.jsx)("div",{className:"text-red-500 text-sm text-center",children:d}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium transition-colors",children:"解锁访问"})]}),(0,n.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:(0,n.jsx)("p",{children:"这是受保护的私人内容"})})]})}):null===o?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"验证中..."})]})}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute top-4 right-4 z-50",children:(0,n.jsxs)("button",{onClick:()=>{localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),l(!1),c(!0),f.push("/")},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-lg",title:"退出登录",children:[(0,n.jsx)("i",{className:"fas fa-sign-out-alt mr-2"}),"退出"]})}),t]})}},2223:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var n=a(7437),r=a(8792),s=a(2265),o=a(4215),l=a.n(o);function i(){let[e,t]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("encrypted-auth"),t=localStorage.getItem("auth-time");if(e&&t)try{let[t,a]=atob(e).split("|");Date.now()-parseInt(a)<864e5?c(!0):(localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),c(!1))}catch(e){localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),c(!1)}else c(!1)};e();let t=()=>{e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),(0,s.useEffect)(()=>{let e=()=>{o(window.pageYOffset>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let m=()=>{localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),c(!1),alert("加密状态已重置，下次访问需要重新输入密码");let e=window.location.pathname;(e.includes("/gallery-wall")||e.includes("/letter-gallery"))&&window.location.reload()};return(0,n.jsx)("nav",{className:"".concat(l().navbar," ").concat(a?l().scrolled:""),children:(0,n.jsxs)("div",{className:l().navbarContainer,children:[(0,n.jsx)("div",{className:l().logo,children:(0,n.jsx)(r.default,{href:"/",className:l().logoLink,children:(0,n.jsx)("span",{className:l().logoText,children:"\uD83D\uDC98 \uD835\uDD78\uD835\uDD9E \uD835\uDD8D\uD835\uDD8A\uD835\uDD86\uD835\uDD97\uD835\uDD99"})})}),(0,n.jsxs)("div",{className:l().menu,children:[(0,n.jsx)(r.default,{href:"/",className:l().menuLink,children:"\uD83C\uDFE0 首页"}),(0,n.jsx)(r.default,{href:"/gallery-wall",className:l().menuLink,children:"\uD83D\uDCF8 照片墙"}),(0,n.jsx)(r.default,{href:"/letter-gallery",className:l().menuLink,children:"\uD83D\uDC8C 信廊"}),i&&(0,n.jsx)("button",{className:l().reEncryptButton,onClick:m,title:"重新加密 - 清除当前认证状态",children:"\uD83D\uDD12 重新加密"})]}),(0,n.jsxs)("button",{className:l().mobileMenuButton,onClick:()=>t(!e),"aria-label":"菜单",children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]}),(0,n.jsxs)("div",{className:"".concat(l().mobileMenu," ").concat(e?l().mobileMenuOpen:""),children:[(0,n.jsx)(r.default,{href:"/",className:l().mobileMenuLink,onClick:()=>t(!1),children:"\uD83C\uDFE0 首页"}),(0,n.jsx)(r.default,{href:"/gallery-wall",className:l().mobileMenuLink,onClick:()=>t(!1),children:"\uD83D\uDCF8 照片墙"}),(0,n.jsx)(r.default,{href:"/letter-gallery",className:l().mobileMenuLink,onClick:()=>t(!1),children:"\uD83D\uDC8C 信廊"}),i&&(0,n.jsx)("button",{className:l().mobileReEncryptButton,onClick:()=>{m(),t(!1)},children:"\uD83D\uDD12 重新加密"})]})]})})}var c=a(7121),m=a.n(c);function u(){let[e,t]=(0,s.useState)(new Date().getFullYear());return(0,s.useEffect)(()=>{t(new Date().getFullYear())},[]),(0,n.jsx)("footer",{className:m().footer,children:(0,n.jsxs)("div",{className:m().footerContent,children:[(0,n.jsxs)("p",{id:m().footerCopyright,children:["\xa9 ",e," BY Aurorp1g. 小猪猪专属\uD83D\uDC37."]}),(0,n.jsxs)("div",{className:m().footerLinks,children:[(0,n.jsx)("a",{href:"https://github.com/Aurorp1g",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("i",{className:"fab fa-github"})}),(0,n.jsx)("a",{href:"https://space.bilibili.com/2066996205",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("i",{className:"fab fa-bilibili"})}),(0,n.jsx)("a",{href:"https://aurorp1g.github.io/",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("i",{className:"fas fa-blog"})})]})]})})}var d=a(553),g=a.n(d);function f(e){let{children:t}=e;return(0,n.jsxs)("div",{className:g().layout,children:[(0,n.jsx)(i,{}),(0,n.jsx)("main",{className:g().mainContent,children:t}),(0,n.jsx)(u,{})]})}},1052:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var n=a(7437),r=a(2673),s=a.n(r),o=a(7191),l=a(2425),i=a.n(l);function c(e){var t;return(0,n.jsxs)(o.E.div,{className:i().framedPicture+" shadow-xl cursor-pointer",initial:{scale:.7,rotate:0},whileInView:{scale:1,rotate:null!==(t=e.rotate)&&void 0!==t?t:10*Math.random()+-5},transition:{type:"spring",stiffness:400,damping:20,mass:1},whileHover:{scale:1.05},whileTap:{scale:1},drag:!0,dragConstraints:{top:0,left:0,right:0,bottom:0},onClick:e.onClick,children:[(0,n.jsx)(o.E.img,{src:e.imageSrc,alt:"image about "+e.nameTag,className:i().framedPictureImage,whileInView:{scale:1},transition:{type:"spring",stiffness:200,damping:20,mass:1},whileHover:{scale:1.05},whileTap:{scale:1}}),""!=e.nameTag&&(0,n.jsx)("h1",{className:s().className+" "+i().framedPictureNameTag,children:e.nameTag}),""!=e.timeTag&&(0,n.jsx)("p",{className:s().className+" "+i().framedPictureTimeTag,children:e.timeTag})]})}function m(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex flex-wrap justify-between items-center xl:py-20 xl:p-40 gap-x-10 gap-y-20",children:e.picturePropsList.map((t,a)=>(0,n.jsx)(c,{imageSrc:t.imageSrc,nameTag:t.nameTag,timeTag:t.timeTag,rotate:t.rotate,onClick:()=>{t.herf&&""!==t.herf?window.open(t.herf,"_blank"):e.onImageClick(t.imageSrc,t.nameTag,t.timeTag)}},t.nameTag+a.toString()))})})}var u=a(1348),d=a(2265);function g(e){let{isOpen:t,imageSrc:a,nameTag:r,timeTag:s,onClose:l}=e,[c,m]=(0,d.useState)(1),[g,f]=(0,d.useState)({x:0,y:0}),[h,p]=(0,d.useState)(!1),[x,b]=(0,d.useState)({x:0,y:0}),y=(0,d.useRef)(null),_=(0,d.useRef)(null);(0,d.useEffect)(()=>{if(t){let e=window.scrollY;document.body.style.overflow="hidden",document.body.style.position="relative",window.scrollTo(0,e)}else document.body.style.overflow="",document.body.style.position="";return()=>{document.body.style.overflow="",document.body.style.position=""}},[t]);let v=()=>{m(1),f({x:0,y:0})};(0,d.useEffect)(()=>{t||v()},[t]);let j=()=>m(e=>Math.min(e+.2,3)),w=()=>m(e=>Math.max(e-.2,.5)),N=()=>v(),k=()=>{p(!1)};return(0,d.useEffect)(()=>{let e=e=>{if(t)switch(e.key){case"Escape":l();break;case"+":case"=":e.preventDefault(),j();break;case"-":e.preventDefault(),w();break;case"0":e.preventDefault(),N()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,l]),(0,n.jsx)(u.M,{children:t&&(0,n.jsx)(o.E.div,{className:"fixed inset-0 z-[1100] flex items-center justify-center ".concat(i().imageViewerBackdrop),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,children:(0,n.jsxs)(o.E.div,{ref:_,className:"relative ".concat(i().imageViewerContent),initial:{scale:.7,opacity:0,y:50,rotate:-5},animate:{scale:1,opacity:1,y:0,rotate:0},exit:{scale:.7,opacity:0,y:50,rotate:5},transition:{type:"spring",damping:25,stiffness:300,mass:1.1},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{className:"absolute -top-4 -left-4 w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full opacity-60 blur-sm"}),(0,n.jsx)("div",{className:"absolute -bottom-4 -right-4 w-12 h-12 bg-gradient-to-r from-yellow-400 to-red-400 rounded-full opacity-40 blur-sm"}),(0,n.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 z-20 ".concat(i().toolbar),children:[(0,n.jsx)(o.E.button,{className:"".concat(i().toolbarButton),onClick:w,whileHover:{scale:1.1},whileTap:{scale:.9},title:"缩小",children:(0,n.jsx)("i",{className:"fa-solid fa-magnifying-glass-minus"})}),(0,n.jsx)(o.E.button,{className:"".concat(i().toolbarButton),onClick:N,whileHover:{scale:1.1},whileTap:{scale:.9},title:"重置",children:(0,n.jsx)("span",{className:"text-xs font-bold",children:"1:1"})}),(0,n.jsx)(o.E.button,{className:"".concat(i().toolbarButton),onClick:j,whileHover:{scale:1.1},whileTap:{scale:.9},title:"放大",children:(0,n.jsx)("i",{className:"fa-solid fa-magnifying-glass-plus"})})]}),(0,n.jsx)(o.E.button,{className:"absolute -top-6 -right-6 z-10 rounded-full p-3 text-white text-2xl ".concat(i().imageViewerCloseButton),onClick:l,whileHover:{scale:1.15,rotate:180},whileTap:{scale:.9},children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,n.jsxs)(o.E.div,{className:"p-6",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10},children:[(0,n.jsx)("div",{className:"rounded-2xl overflow-hidden cursor-move",onMouseDown:e=>{c<=1||(p(!0),b({x:e.clientX-g.x,y:e.clientY-g.y}))},onMouseMove:e=>{h&&!(c<=1)&&f({x:e.clientX-x.x,y:e.clientY-x.y})},onMouseUp:k,onMouseLeave:k,onWheel:e=>{e.preventDefault();let t=e.deltaY>0?-.1:.1;m(e=>Math.max(.5,Math.min(3,e+t)))},style:{cursor:c>1?"grab":"default"},children:(0,n.jsx)("img",{ref:y,src:a,alt:r,className:"w-full max-h-[70vh] object-contain ".concat(i().imageViewerImage),style:{transform:"scale(".concat(c,") translate(").concat(g.x,"px, ").concat(g.y,"px)"),transformOrigin:"center center",transition:"transform 0.2s ease"},draggable:!1})}),(r||s)&&(0,n.jsxs)(o.E.div,{className:"mt-6 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[r&&(0,n.jsx)(o.E.h3,{className:"text-3xl font-bold text-white mb-3 bg-gradient-to-r from-white to-gray-200 bg-clip-text text-transparent",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4},children:r}),s&&(0,n.jsxs)(o.E.p,{className:"text-white/80 text-lg font-light italic",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:["\uD83D\uDCC5 ",s]})]})]}),(0,n.jsxs)(o.E.div,{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 text-white/60 text-sm font-light text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[(0,n.jsx)("div",{children:"✨ 滚轮缩放 • 拖拽移动 • 点击背景关闭 ✨"}),(0,n.jsx)("div",{className:"text-xs mt-1",children:"快捷键: +放大 -缩小 0重置 Esc关闭"})]}),1!==c&&(0,n.jsxs)(o.E.div,{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm font-mono z-20",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:[Math.round(100*c),"%"]})]})})})}var f=a(2223),h=a(5043),p=a(3827),x=a.n(p);function b(){let e="/My-Heart",[t,a]=(0,d.useState)({backgroundImage:"",randomOrder:!1,picturePropsList:[]}),[r,s]=(0,d.useState)({isOpen:!1,imageSrc:"",nameTag:"",timeTag:""});return(0,d.useEffect)(()=>{fetch("".concat(e,"/gallery-wall/gallery-wall-config.json")).then(e=>e.json()).then(t=>{let n={backgroundImage:"",randomOrder:!1,picturePropsList:[]};""!=t.backgroundImage&&t.backgroundImage&&(n.backgroundImage=t.backgroundImage),t.randomOrder&&(n.randomOrder=t.randomOrder),t.pictureList.forEach(t=>{n.picturePropsList.push({imageSrc:"".concat(e).concat(t.imageSrc),nameTag:t.nameTag,timeTag:t.timeTag,herf:t.herf}),a(n)})})},[]),t.randomOrder&&(t.picturePropsList=(e=>{for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e})(t.picturePropsList)),(0,n.jsx)(h.Z,{children:(0,n.jsxs)(f.Z,{children:[(0,n.jsxs)("div",{className:x().backgroundContainer,children:[(0,n.jsx)("div",{className:x().backgroundImage,style:{backgroundImage:"url('".concat(t.backgroundImage,"')")}}),(0,n.jsx)("div",{className:x().backgroundImage,style:{backgroundImage:"url('".concat(e,"/bg/gallery-background.jpg')")}})]}),(0,n.jsx)("div",{className:x().contentWrapper,children:(0,n.jsx)(m,{picturePropsList:t.picturePropsList,onImageClick:(e,t,a)=>{s({isOpen:!0,imageSrc:e,nameTag:t,timeTag:a})}})}),(0,n.jsx)(g,{isOpen:r.isOpen,imageSrc:r.imageSrc,nameTag:r.nameTag,timeTag:r.timeTag,onClose:()=>{s({isOpen:!1,imageSrc:"",nameTag:"",timeTag:""})}})]})})}},7121:function(e){e.exports={footer:"footer_footer__wCyt8",footerContent:"footer_footerContent__jHp3r",footerLinks:"footer_footerLinks__Kdp0q",footerCopyright:"footer_footerCopyright__tfHdq",footerBlink:"footer_footerBlink__Vy2hx"}},553:function(e){e.exports={layout:"layout_layout__5LqQF",mainContent:"layout_mainContent__G_6Yc"}},4215:function(e){e.exports={navbar:"navbar_navbar__iB8wV",navbarContainer:"navbar_navbarContainer__Ua68S",logoLink:"navbar_logoLink__rm4T3",logoText:"navbar_logoText__td_O2",gradientShift:"navbar_gradientShift__pFjyG",menu:"navbar_menu__WqQ9M",menuLink:"navbar_menuLink__CydcH",reEncryptButton:"navbar_reEncryptButton__69xCH",mobileReEncryptButton:"navbar_mobileReEncryptButton__fg_Gz",mobileMenuButton:"navbar_mobileMenuButton__tjr2F",mobileMenu:"navbar_mobileMenu__qyJrZ",slideDown:"navbar_slideDown__G8LvC",mobileMenuOpen:"navbar_mobileMenuOpen__EW5IZ",mobileMenuLink:"navbar_mobileMenuLink__L4vtq",scrolled:"navbar_scrolled__WW7SD"}},2425:function(e){e.exports={framedPicture:"styles_framedPicture__4jgPe",framedPictureImage:"styles_framedPictureImage__U_dPo",framedPictureNameTag:"styles_framedPictureNameTag__Fy2nG",framedPictureTimeTag:"styles_framedPictureTimeTag__dTId_",imageViewerBackdrop:"styles_imageViewerBackdrop__GtX8n",imageViewerContent:"styles_imageViewerContent__HD_3r",imageViewerImage:"styles_imageViewerImage__MObvo",imageViewerCloseButton:"styles_imageViewerCloseButton__Qfu0C",toolbar:"styles_toolbar__Crssy",toolbarButton:"styles_toolbarButton__4J7L_"}},3827:function(e){e.exports={background:"styles_background__qMZ1J",backgroundNoiseFilter:"styles_backgroundNoiseFilter__3F5tJ",backgroundContainer:"styles_backgroundContainer__QGiFv",backgroundImage:"styles_backgroundImage__UskbH",contentWrapper:"styles_contentWrapper__4S_kD"}},2673:function(e){e.exports={style:{fontFamily:"'__Oswald_fb5e8d', '__Oswald_Fallback_fb5e8d'",fontStyle:"normal"},className:"__className_fb5e8d"}}},function(e){e.O(0,[901,67,971,69,744],function(){return e(e.s=6646)}),_N_E=e.O()}]);