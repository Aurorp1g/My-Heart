(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{8466:function(e,t,a){Promise.resolve().then(a.bind(a,175))},175:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n=a(7437),i=a(7956),s=a.n(i),r=a(7191),l=a(2767),o=a.n(l);function c(e){var t;let a=t=>{e.onClick&&e.onClick(t,e.nameTag,e.timeTag)};return(0,n.jsxs)(r.E.div,{className:o().framedPicture+" shadow-xl cursor-pointer",initial:{scale:.7,rotate:0},whileInView:{scale:1,rotate:null!==(t=e.rotate)&&void 0!==t?t:10*Math.random()+-5},transition:{type:"spring",stiffness:400,damping:20,mass:1},whileHover:{scale:1.05},whileTap:{scale:1},drag:!0,dragConstraints:{top:0,left:0,right:0,bottom:0},onClick:()=>{e.herf&&""!==e.herf&&window.open(e.herf,"_blank")},children:[(0,n.jsx)("div",{className:o().imageListContainer,children:e.imageList.map((t,i)=>(0,n.jsx)(r.E.img,{src:t,alt:"image about "+e.nameTag,className:o().framedPictureImage,whileInView:{scale:1},transition:{type:"spring",stiffness:200,damping:20,mass:1},whileHover:{scale:1.05},whileTap:{scale:1},onClick:e=>{e.stopPropagation(),a(t)},style:{cursor:"pointer"}},i))}),""!=e.nameTag&&(0,n.jsx)("h1",{className:s().className+" "+o().framedPictureNameTag,children:e.nameTag}),""!=e.timeTag&&(0,n.jsx)("p",{className:s().className+" "+o().framedPictureTimeTag,children:e.timeTag})]})}function m(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:o().letterGalleryContainer,children:e.picturePropsList.map((t,a)=>(0,n.jsx)(c,{imageList:t.imageList,nameTag:t.nameTag,timeTag:t.timeTag,rotate:0,herf:t.herf,onClick:e.onImageClick},t.nameTag+a.toString()))})})}var d=a(1348),g=a(2265);function u(e){let{isOpen:t,imageSrc:a,nameTag:i,timeTag:s,onClose:l,imageList:c=[],currentIndex:m=0,onPrev:u,onNext:p}=e,[h,f]=(0,g.useState)(1),[x,y]=(0,g.useState)({x:0,y:0}),[b,_]=(0,g.useState)(!1),[w,v]=(0,g.useState)({x:0,y:0}),k=(0,g.useRef)(null),j=(0,g.useRef)(null),T=c.length>0&&m>0,N=c.length>0&&m<c.length-1;(0,g.useEffect)(()=>{if(t){let e=window.scrollY;document.body.style.overflow="hidden",document.body.style.position="relative",window.scrollTo(0,e)}else document.body.style.overflow="",document.body.style.position="";return()=>{document.body.style.overflow="",document.body.style.position=""}},[t]);let L=()=>{f(1),y({x:0,y:0})};(0,g.useEffect)(()=>{t||L()},[t]);let C=()=>f(e=>Math.min(e+.2,3)),I=()=>f(e=>Math.max(e-.2,.5)),E=()=>L(),P=()=>{_(!1)};return(0,g.useEffect)(()=>{let e=e=>{if(t)switch(e.key){case"Escape":l();break;case"+":case"=":e.preventDefault(),C();break;case"-":e.preventDefault(),I();break;case"0":e.preventDefault(),E();break;case"ArrowLeft":e.preventDefault(),T&&u&&u();break;case"ArrowRight":e.preventDefault(),N&&p&&p()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,l,T,N,u,p]),(0,n.jsx)(d.M,{children:t&&(0,n.jsx)(r.E.div,{className:"fixed inset-0 z-[1100] flex items-center justify-center ".concat(o().imageViewerBackdrop),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,children:(0,n.jsxs)(r.E.div,{ref:j,className:"relative ".concat(o().imageViewerContent),initial:{scale:.7,opacity:0,y:50,rotate:-5},animate:{scale:1,opacity:1,y:0,rotate:0},exit:{scale:.7,opacity:0,y:50,rotate:5},transition:{type:"spring",damping:25,stiffness:300,mass:1.1},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{className:"absolute -top-4 -left-4 w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full opacity-60 blur-sm"}),(0,n.jsx)("div",{className:"absolute -bottom-4 -right-4 w-12 h-12 bg-gradient-to-r from-yellow-400 to-red-400 rounded-full opacity-40 blur-sm"}),(0,n.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 z-20 ".concat(o().toolbar),children:[(0,n.jsx)(r.E.button,{className:"".concat(o().toolbarButton),onClick:I,whileHover:{scale:1.1},whileTap:{scale:.9},title:"缩小",children:(0,n.jsx)("i",{className:"fa-solid fa-magnifying-glass-minus"})}),(0,n.jsx)(r.E.button,{className:"".concat(o().toolbarButton),onClick:E,whileHover:{scale:1.1},whileTap:{scale:.9},title:"重置",children:(0,n.jsx)("span",{className:"text-xs font-bold",children:"1:1"})}),(0,n.jsx)(r.E.button,{className:"".concat(o().toolbarButton),onClick:C,whileHover:{scale:1.1},whileTap:{scale:.9},title:"放大",children:(0,n.jsx)("i",{className:"fa-solid fa-magnifying-glass-plus"})})]}),(0,n.jsx)(r.E.button,{className:"absolute -top-6 -right-6 z-10 rounded-full p-3 text-white text-2xl ".concat(o().imageViewerCloseButton),onClick:l,whileHover:{scale:1.15,rotate:180},whileTap:{scale:.9},children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.length>1&&(0,n.jsxs)(n.Fragment,{children:[T&&(0,n.jsx)(r.E.button,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-20 rounded-full p-4 text-white text-2xl ".concat(o().navButton),onClick:u,whileHover:{scale:1.15,x:-5},whileTap:{scale:.9},title:"上一张 (←)",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),N&&(0,n.jsx)(r.E.button,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-20 rounded-full p-4 text-white text-2xl ".concat(o().navButton),onClick:p,whileHover:{scale:1.15,x:5},whileTap:{scale:.9},title:"下一张 (→)",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsxs)(r.E.div,{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-1 rounded-full text-sm font-medium z-20",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:[m+1," / ",c.length]})]}),(0,n.jsxs)(r.E.div,{className:"p-6",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10},children:[(0,n.jsx)("div",{className:"rounded-2xl overflow-hidden cursor-move",onMouseDown:e=>{h<=1||(_(!0),v({x:e.clientX-x.x,y:e.clientY-x.y}))},onMouseMove:e=>{b&&!(h<=1)&&y({x:e.clientX-w.x,y:e.clientY-w.y})},onMouseUp:P,onMouseLeave:P,onWheel:e=>{e.preventDefault();let t=e.deltaY>0?-.1:.1;f(e=>Math.max(.5,Math.min(3,e+t)))},style:{cursor:h>1?"grab":"default"},children:(0,n.jsx)("img",{ref:k,src:a,alt:i,className:"w-full max-h-[70vh] object-contain ".concat(o().imageViewerImage),style:{transform:"scale(".concat(h,") translate(").concat(x.x,"px, ").concat(x.y,"px)"),transformOrigin:"center center",transition:"transform 0.2s ease"},draggable:!1})}),(i||s)&&(0,n.jsxs)(r.E.div,{className:"mt-6 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[i&&(0,n.jsx)(r.E.h3,{className:"text-3xl font-bold text-white mb-3 bg-gradient-to-r from-white to-gray-200 bg-clip-text text-transparent",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4},children:i}),s&&(0,n.jsxs)(r.E.p,{className:"text-white/80 text-lg font-light italic",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:["\uD83D\uDCC5 ",s]})]})]}),(0,n.jsxs)(r.E.div,{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 text-white/60 text-sm font-light text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[(0,n.jsx)("div",{children:"✨ 滚轮缩放 • 拖拽移动 • 点击背景关闭 ✨"}),(0,n.jsx)("div",{className:"text-xs mt-1",children:"快捷键: +放大 -缩小 0重置 Esc关闭 ←→切换"})]}),1!==h&&(0,n.jsxs)(r.E.div,{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm font-mono z-20",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:[Math.round(100*h),"%"]})]})})})}var p=a(190),h=a(9151),f=a.n(h),x=a(5043);function y(){let e="/My-Heart",[t,a]=(0,g.useState)({backgroundImage:"",randomOrder:!1,letterPropsList:[]}),[i,s]=(0,g.useState)({isOpen:!1,imageSrc:"",nameTag:"",timeTag:"",imageList:[],currentIndex:0});(0,g.useEffect)(()=>{fetch("".concat(e,"/letter-gallery/letter-gallery-config.json")).then(e=>e.json()).then(t=>{let n={backgroundImage:"",randomOrder:!1,letterPropsList:[]};""!=t.backgroundImage&&t.backgroundImage&&(n.backgroundImage=t.backgroundImage),t.randomOrder&&(n.randomOrder=t.randomOrder),t.letterList.forEach(t=>{let a=t.imageList?t.imageList.map(t=>"".concat(e).concat(t)):t.imageSrc?["".concat(e).concat(t.imageSrc)]:[];n.letterPropsList.push({imageList:a,nameTag:t.nameTag,timeTag:t.timeTag,herf:t.herf})}),a(n)})},[]);let r=t.randomOrder?(e=>{for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e})([...t.letterPropsList]):t.letterPropsList,l=()=>{let e=[];return r.forEach(t=>{t.imageList&&t.imageList.length>0&&e.push(...t.imageList)}),e},o=e=>{let t=l().findIndex(t=>t===e);if(-1!==t){let a=r.find(t=>t.imageList&&t.imageList.includes(e));if(a)return{index:t,nameTag:a.nameTag,timeTag:a.timeTag}}return null};return(0,n.jsx)(x.Z,{children:(0,n.jsxs)(p.Z,{children:[(0,n.jsxs)("div",{className:f().backgroundContainer,children:[(0,n.jsx)("div",{className:f().backgroundImage,style:{backgroundImage:"url('".concat(t.backgroundImage,"')")}}),(0,n.jsx)("div",{className:f().backgroundImage,style:{backgroundImage:"url('".concat(e,"/bg/letter-background.jpg')")}})]}),(0,n.jsxs)("div",{className:f().contentWrapper,children:[(0,n.jsxs)("div",{className:f().pageHeader,children:[(0,n.jsx)("h1",{children:"信廊"}),(0,n.jsx)("p",{children:"这里收藏着我的信件"})]}),(0,n.jsx)(m,{picturePropsList:r,onImageClick:(e,t,a)=>{let n=l(),i=o(e);s({isOpen:!0,imageSrc:e,nameTag:t,timeTag:a,imageList:n,currentIndex:(null==i?void 0:i.index)||0})}})]}),(0,n.jsx)(u,{isOpen:i.isOpen,imageSrc:i.imageSrc,nameTag:i.nameTag,timeTag:i.timeTag,onClose:()=>{s({isOpen:!1,imageSrc:"",nameTag:"",timeTag:"",imageList:[],currentIndex:0})},imageList:i.imageList,currentIndex:i.currentIndex,onPrev:()=>{if(i.currentIndex>0){let e=i.currentIndex-1,t=i.imageList[e],a=o(t);a&&s(n=>({...n,imageSrc:t,nameTag:a.nameTag,timeTag:a.timeTag,currentIndex:e}))}},onNext:()=>{if(i.currentIndex<i.imageList.length-1){let e=i.currentIndex+1,t=i.imageList[e],a=o(t);a&&s(n=>({...n,imageSrc:t,nameTag:a.nameTag,timeTag:a.timeTag,currentIndex:e}))}}})]})})}},2767:function(e){e.exports={letterGalleryContainer:"styles_letterGalleryContainer__ZDpu3",framedPicture:"styles_framedPicture__E4d7G",imageListContainer:"styles_imageListContainer__zQ5E1",framedPictureImage:"styles_framedPictureImage__9FumQ",framedPictureNameTag:"styles_framedPictureNameTag__T2xJk",framedPictureTimeTag:"styles_framedPictureTimeTag___S7Dp",imageViewerBackdrop:"styles_imageViewerBackdrop__e2qJ_",imageViewerContent:"styles_imageViewerContent__0EZDr",imageViewerImage:"styles_imageViewerImage___Cn3w",imageViewerCloseButton:"styles_imageViewerCloseButton__9HB2P",toolbar:"styles_toolbar__hFXH_",toolbarButton:"styles_toolbarButton__vXvLN",navButton:"styles_navButton__HhXgi"}},9151:function(e){e.exports={background:"styles_background__x6Rv1",backgroundNoiseFilter:"styles_backgroundNoiseFilter__MDw8d",backgroundContainer:"styles_backgroundContainer__ngLis",backgroundImage:"styles_backgroundImage__D2Jj_",contentWrapper:"styles_contentWrapper__G_iZf",pageHeader:"styles_pageHeader__l1Izd"}},7956:function(e){e.exports={style:{fontFamily:"'__Oswald_fb5e8d', '__Oswald_Fallback_fb5e8d'",fontStyle:"normal"},className:"__className_fb5e8d"}}},function(e){e.O(0,[901,67,628,971,69,744],function(){return e(e.s=8466)}),_N_E=e.O()}]);