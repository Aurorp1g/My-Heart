(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[628],{5043:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var n=a(7437),r=a(2265),l=a(7907);function o(e){let{children:t,requiredPassword:a="250601"}=e,[o,s]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),g=(0,l.useRouter)();return((0,l.usePathname)(),(0,r.useEffect)(()=>{(()=>{let e=localStorage.getItem("encrypted-auth"),t=localStorage.getItem("auth-time");if(e&&t)try{let[t,n]=atob(e).split("|");if(t===btoa(a)&&Date.now()-parseInt(n)<864e5){s(!0);return}}catch(e){localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time")}s(!1),c(!0)})()},[a]),i)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-50 to-red-100",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full mx-4",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)("i",{className:"fas fa-lock text-red-500 text-2xl"})}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"访问保护"}),(0,n.jsx)("p",{className:"text-gray-600",children:"请输入密码访问此页面"})]}),(0,n.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),h(""),u===a){let e=Date.now().toString(),t=btoa("".concat(btoa(a),"|").concat(e));localStorage.setItem("encrypted-auth",t),localStorage.setItem("auth-time",e),s(!0),c(!1),d("")}else h("密码错误，请重试")},className:"space-y-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"password",value:u,onChange:e=>d(e.target.value),placeholder:"请输入访问密码",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",autoFocus:!0})}),m&&(0,n.jsx)("div",{className:"text-red-500 text-sm text-center",children:m}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium transition-colors",children:"解锁访问"})]}),(0,n.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:(0,n.jsx)("p",{children:"这是受保护的私人内容"})})]})}):null===o?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"验证中..."})]})}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute top-4 right-4 z-50",children:(0,n.jsxs)("button",{onClick:()=>{localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),s(!1),c(!0),g.push("/")},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-lg",title:"退出登录",children:[(0,n.jsx)("i",{className:"fas fa-sign-out-alt mr-2"}),"退出"]})}),t]})}},190:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var n=a(7437),r=a(8792),l=a(2265),o=a(7907),s=a(4215),i=a.n(s);function c(){let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),h=(0,o.usePathname)();(0,l.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("encrypted-auth"),t=localStorage.getItem("auth-time");if(e&&t)try{let[t,a]=atob(e).split("|");Date.now()-parseInt(a)<864e5?u(!0):(localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),u(!1))}catch(e){localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),u(!1)}else u(!1)};e();let t=()=>{e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),(0,l.useEffect)(()=>{let e=()=>{m("true"===localStorage.getItem("music-playing"))};e();let t=()=>{e()};return window.addEventListener("music-status-change",t),()=>window.removeEventListener("music-status-change",t)},[]),(0,l.useEffect)(()=>{let e=()=>{s(window.pageYOffset>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let g=e=>"/"===e?"/"===h:h.startsWith(e),f=()=>{localStorage.removeItem("encrypted-auth"),localStorage.removeItem("auth-time"),u(!1),alert("加密状态已重置，下次访问需要重新输入密码");let e=window.location.pathname;(e.includes("/gallery-wall")||e.includes("/letter-gallery"))&&window.location.reload()},v=()=>{let e=!d;m(e),localStorage.setItem("music-playing",e.toString()),window.dispatchEvent(new CustomEvent("music-toggle",{detail:{playing:e}})),window.dispatchEvent(new CustomEvent("user-interaction"))};return(0,n.jsx)("nav",{className:"".concat(i().navbar," ").concat(a?i().scrolled:""),children:(0,n.jsxs)("div",{className:i().navbarContainer,children:[(0,n.jsx)("div",{className:i().logo,children:(0,n.jsx)(r.default,{href:"/",className:i().logoLink,children:(0,n.jsx)("span",{className:i().logoText,children:"\uD83D\uDC98 \uD835\uDD78\uD835\uDD9E \uD835\uDD8D\uD835\uDD8A\uD835\uDD86\uD835\uDD97\uD835\uDD99"})})}),(0,n.jsxs)("div",{className:i().menu,children:[(0,n.jsx)(r.default,{href:"/",className:i().menuLink,"data-active":g("/"),children:"\uD83C\uDFE0 首页"}),(0,n.jsx)(r.default,{href:"/gallery-wall",className:i().menuLink,"data-active":g("/gallery-wall"),children:"\uD83D\uDCF8 照片墙"}),(0,n.jsx)(r.default,{href:"/letter-gallery",className:i().menuLink,"data-active":g("/letter-gallery"),children:"\uD83D\uDC8C 信廊"}),c&&(0,n.jsx)("button",{className:i().reEncryptButton,onClick:f,title:"重新加密 - 清除当前认证状态",children:"\uD83D\uDD12 重新加密"}),(0,n.jsx)("button",{className:"".concat(i().musicButton," ").concat(d?i().musicPlaying:""),onClick:v,title:d?"暂停音乐":"播放音乐",children:d?"\uD83C\uDFB5":"\uD83D\uDD07"})]}),(0,n.jsxs)("button",{className:i().mobileMenuButton,onClick:()=>t(!e),"aria-label":"菜单",children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]}),(0,n.jsxs)("div",{className:"".concat(i().mobileMenu," ").concat(e?i().mobileMenuOpen:""),children:[(0,n.jsx)(r.default,{href:"/",className:i().mobileMenuLink,onClick:()=>t(!1),"data-active":g("/"),children:"\uD83C\uDFE0 首页"}),(0,n.jsx)(r.default,{href:"/gallery-wall",className:i().mobileMenuLink,onClick:()=>t(!1),"data-active":g("/gallery-wall"),children:"\uD83D\uDCF8 照片墙"}),(0,n.jsx)(r.default,{href:"/letter-gallery",className:i().mobileMenuLink,onClick:()=>t(!1),"data-active":g("/letter-gallery"),children:"\uD83D\uDC8C 信廊"}),c&&(0,n.jsx)("button",{className:i().mobileReEncryptButton,onClick:()=>{f(),t(!1)},children:"\uD83D\uDD12 重新加密"}),(0,n.jsx)("button",{className:"".concat(i().mobileMusicButton," ").concat(d?i().musicPlaying:""),onClick:()=>{v(),t(!1)},children:d?"\uD83C\uDFB5 音乐播放中":"\uD83D\uDD07 播放音乐"})]})]})})}var u=a(7121),d=a.n(u);function m(){let[e,t]=(0,l.useState)(new Date().getFullYear());return(0,l.useEffect)(()=>{t(new Date().getFullYear())},[]),(0,n.jsx)("footer",{className:d().footer,children:(0,n.jsxs)("div",{className:d().footerContent,children:[(0,n.jsxs)("p",{id:d().footerCopyright,children:["\xa9 ",e," BY Aurorp1g. 小猪猪专属\uD83D\uDC37."]}),(0,n.jsxs)("div",{className:d().footerLinks,children:[(0,n.jsx)("a",{href:"https://github.com/Aurorp1g",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("i",{className:"fab fa-github"})}),(0,n.jsx)("a",{href:"https://space.bilibili.com/2066996205",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("i",{className:"fab fa-bilibili"})}),(0,n.jsx)("a",{href:"https://aurorp1g.github.io/",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("i",{className:"fas fa-blog"})})]})]})})}let h=null,g=!1;function f(){let e=(0,l.useRef)(null);return(0,l.useEffect)(()=>{h||((h=document.createElement("audio")).loop=!0,h.volume=.85,h.preload="auto",h.src="".concat("/My-Heart","/music/background-music.mp3"),document.body.appendChild(h),console.log("全局音频元素已创建")),e.current=h,"true"===localStorage.getItem("music-playing")&&g&&(null==h||h.play().catch(console.error));let t=e=>{let{playing:t}=e.detail;t&&g?null==h||h.play().catch(console.error):null==h||h.pause()},a=()=>{g||(g=!0,"true"===localStorage.getItem("music-playing")&&(null==h||h.play().catch(console.error)))},n=()=>{!document.hidden&&g&&"true"===localStorage.getItem("music-playing")&&(null==h?void 0:h.paused)&&(null==h||h.play().catch(console.error))},r=()=>{window.dispatchEvent(new CustomEvent("music-status-change"))};return window.addEventListener("music-toggle",t),window.addEventListener("user-interaction",a),window.addEventListener("storage",r),document.addEventListener("visibilitychange",n),["click","keydown","touchstart","mousedown","scroll"].forEach(e=>{document.addEventListener(e,a,{once:!0})}),()=>{window.removeEventListener("music-toggle",t),window.removeEventListener("user-interaction",a),window.removeEventListener("storage",r),document.removeEventListener("visibilitychange",n),h&&!g&&h.pause()}},[]),null}var v=a(553),b=a.n(v);function x(e){let{children:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{}),(0,n.jsxs)("div",{className:b().layout,children:[(0,n.jsx)(c,{}),(0,n.jsx)("main",{className:b().main,children:t}),(0,n.jsx)(m,{})]})]})}},7121:function(e){e.exports={footer:"footer_footer__wCyt8",footerContent:"footer_footerContent__jHp3r",footerLinks:"footer_footerLinks__Kdp0q",footerCopyright:"footer_footerCopyright__tfHdq",footerHeartBeat:"footer_footerHeartBeat__5j13n"}},553:function(e){e.exports={layout:"layout_layout__5LqQF",mainContent:"layout_mainContent__G_6Yc"}},4215:function(e){e.exports={navbar:"navbar_navbar__iB8wV",navbarContainer:"navbar_navbarContainer__Ua68S",logoLink:"navbar_logoLink__rm4T3",logoText:"navbar_logoText__td_O2",gradientShift:"navbar_gradientShift__pFjyG",menu:"navbar_menu__WqQ9M",menuLink:"navbar_menuLink__CydcH",reEncryptButton:"navbar_reEncryptButton__69xCH",mobileReEncryptButton:"navbar_mobileReEncryptButton__fg_Gz",mobileMenuButton:"navbar_mobileMenuButton__tjr2F",mobileMenu:"navbar_mobileMenu__qyJrZ",slideDown:"navbar_slideDown__G8LvC",mobileMenuOpen:"navbar_mobileMenuOpen__EW5IZ",mobileMenuLink:"navbar_mobileMenuLink__L4vtq",scrolled:"navbar_scrolled__WW7SD",musicButton:"navbar_musicButton__VbYLM",musicPlaying:"navbar_musicPlaying__vyXhD",pulse:"navbar_pulse__MYIBR",mobileMusicButton:"navbar_mobileMusicButton__SWUkZ"}}}]);